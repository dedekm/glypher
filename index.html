<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Glypher with Plumin</title>
  <script src="libs/plumin.js" charset="utf-8"></script>
  <script src="dist/glypher.js" charset="utf-8"></script>
  <style media="screen">
    textarea {
      width: 100%;
      height: 300px;
      margin: 0;
      padding: 20px;
      border: 0;
      border-radius: 0;
      font-family: 'Demo', sans-serif;
      font-size: 50px;
      resize: none;
    }

    #download {
      display: inline-block;
      margin: 5px;
      padding: 5px 7px;
      text-decoration: none;
      color: #FFE;
      background: #FF725E;
    }
  </style>
</head>

<body>
  <textarea>A B C D E a b c d e</textarea>
  <a download="demo.otf" href="#" id="download">â–½ Download</a>
  <canvas id="canvas" width="1024" height="1024" style="display: none;"></canvas>
  <script type="text/javascript">
    (function(p) {
      'use strict';
      p.install(window);
      // Setup paper.js by providing a canvas element
      p.setup(document.getElementById('canvas'));

      var font = new p.Font({
          familyName: 'Demo',
          ascender: 800,
          descender: -200
        });

      var generator = new glypher.Generator();
      var someGlyphs = 'ABCDEFGabcde',
        generatedGlyphs = [];
      for (var i = 0; i < someGlyphs.length; i++) {
        var path = generator.generateGlyph(someGlyphs[i], new glypher.Alphabet({}).glyphs[someGlyphs[i]]);
        var glyph = new p.Glyph({
          name: someGlyphs[i],
          unicode: someGlyphs[i],
          advanceWidth: path.width
        })
        glyph.addContour(path.path);
        generatedGlyphs.push(glyph);
      }


      font.addGlyphs(generatedGlyphs);
      font.updateOTCommands()
        .addToFonts();

      document.getElementById('download').onclick = function() {
        font.download();
      };

    })(plumin.paper);
  </script>
</body>

</html>
