<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Glypher Example 1</title>
  <script type="text/javascript" src="../bower_components/paper/dist/paper-full.min.js"></script>
  <script type="text/javascript" src="../glypher.js"></script>
</head>

<body>
  <canvas id="myCanvas" resize width="900" height="400"></canvas>
  <script type="text/javascript">
    window.onload = function() {
      var generator = new Generator({
        height: 10,
        width: 5,
        xheight: 7,
        weight: 10
      });

      generator.generateGlyph = function(name, points) {
        var glyph = new Glyph(name, this.weight, this.contrast, this.proportion);

        var segments = [];
        var box = new Point(glyph.weight, glyph.contrast);

        var segments = [];

        for (var i = 0; i < points.length - 1; i++) {
          var p1 = new Point(points[i]).multiply([glyph.size / glyph.proportion, glyph.size]);
          var p2 = new Point(points[i + 1]).multiply([glyph.size / glyph.proportion, glyph.size]);
          var helpPath = new Path.Line(p1, p2);
          var n = 6 * helpPath.length/100;

          for (var j = 0; j < n; j++) {
            var circle = new Path.Circle({
              center: helpPath.getPointAt(helpPath.length / n * j),
              radius: glyph.weight,
            })
            segments.push(circle);
          }

        }

        glyph.path = glyph.mergeSegments(segments);
        return glyph;

      }
      generator.generate();
      console.log(generator);

      var letterSpacing = 100,
        kerning = 80;

      for (var i = 0; i < generator.glyphs.length; i++) {
        //DEBUG
        // console.log(generator.glyphs[i].name + " - width: " + generator.glyphs[i].width);
        generator.glyphs[i].draw(letterSpacing, 200);
        letterSpacing += generator.glyphs[i].width + generator.glyphs[i].weight + kerning;
      }



      paper.view.draw();
    }
  </script>

</body>

</html>
